PYTHON ?= python

clean:
	$(PYTHON) setup.py clean

build:
	$(PYTHON) setup.py build

pypi: clean
	# files generated by swig
	rm -f smartcard/scard/scard.py
	rm -f smartcard/scard/scard_wrap.c
	# files generated by sphinx
	rm -rf smartcard/doc/_build
	$(PYTHON) setup.py sdist upload

test: build
	$(PYTHON) setup.py test

.PHONY: clean build pypi test
